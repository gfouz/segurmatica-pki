var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var R=(n,r,t)=>r in n?X(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,m=(n,r)=>{for(var t in r||(r={}))J.call(r,t)&&R(n,t,r[t]);if(D)for(var t of D(r))ee.call(r,t)&&R(n,t,r[t]);return n},B=(n,r)=>Y(n,Z(r));import{j as e,F as f,a as s,s as j,r as _,a2 as o,a3 as l,a1 as re}from"./index.84145a61.js";import{t as te}from"./constants.c1eecf01.js";import{C as ne}from"./Toast.399d4852.js";import{S as O,D as ae}from"./SubmitButton.d37232a3.js";import{C as ie,F as se}from"./Card.4f06ee74.js";import{G as oe}from"./GetEnabled.c9b1ba58.js";import{S as le,G as de,a as ce}from"./Getter.2ace4167.js";import{u as K,b as ue,s as me}from"./store.6f1159d1.js";import{u as U,a as H}from"./index.esm.d64a2720.js";import{u as T,S as M}from"./StatusHandler.4fa71a43.js";import{a as pe,i as c,b as he}from"./StyledLabel.97b52d23.js";import{T as C,I,E as A}from"./ErrorWarning.4beaff6e.js";import{S as fe}from"./chakra-ui-select.esm.7d7cae85.js";import{G as be}from"./GetByParams.3e5ce4c1.js";import{G as ge}from"./GetByName.a5d01092.js";import"./chakra-ui-button.esm.6a8e0e0a.js";import"./chakra-ui-checkbox.esm.477918d5.js";const ye="http://localhost:5000",G=pe.create({baseURL:ye,withCredentials:!1});G.defaults.headers.common["Content-Type"]="application/json";const W={size:"sm",type:"file",variant:"flushed"};async function Se(n,r){try{const t=await G.post(n,r),{data:d}=t;return d}catch(t){return t==null?void 0:t.message}}async function qe(n,r,t){try{return(await G.put(`/${r}/${t}`,n)).data}catch(d){return d.message}}async function E(n){try{return(await G.get(n)).data}catch(r){return r.message}}function V({message:n,children:r}){return e(f,{children:e(C,{label:n,hasArrow:!0,arrowSize:15,children:r})})}function L(n){const{list:r,register:t,label:d,required:a}=n;return e(f,{children:e(fe,B(m({},t(d,{required:a})),{placeholder:"Select option",size:"xm",color:"#000000",children:r&&r.map((i,x)=>e("option",{value:i.id,children:i.email&&i.email||i.name&&i.name},x))}))})}const N=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(I,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^\d+$/,required:t,minLength:4,maxLength:4})))}),e(A,{label:n,errors:d,info:i})]}),q=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(I,m({size:"sm",type:"text",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^[a-zA-Z\u00C0-\u017F\s]+$/,required:t})))}),e(A,{label:n,errors:d,info:i})]}),P=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(I,m({size:"sm",type:"tel",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{required:t,pattern:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{2,6}$/im})))}),e(A,{label:n,errors:d,info:i})]});let S=new Date().getFullYear();const Ie=new Date().getMonth()+1;S=parseInt(S.toString().substring(2,4));const Q=({register:n,errors:r,defaultValue:t,info:d})=>s(f,{children:[e(C,{label:"campo requerido de 11 d\xEDgitos",hasArrow:!0,arrowSize:15,children:e(I,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:t},n("ci",{required:!0,validate:{isOlder:a=>S-parseInt(a.substring(0,2))==18&&Ie>parseInt(a.substring(2,4))||S>parseInt(a.substring(0,2))&&S-parseInt(a.substring(0,2))>18||S<parseInt(a.substring(0,2))&&parseInt(a.substring(0,2))<99,min_month:a=>parseInt(a.substring(2,4))>=1,max_month:a=>parseInt(a.substring(2,4))<=12,min_day:a=>parseInt(a.substring(4,6))>=1,max_day:a=>parseInt(a.substring(4,6))<=31},minLength:11,maxLength:11})))}),e(A,{label:"ci",errors:r,info:d})]});function xe(){var $;const n=K(ue),{stack:r}=n,t=K(me),[d,a]=_.exports.useState(""),{register:i,handleSubmit:x,formState:{errors:u}}=U(),w="/users/enabled/true",v="/empresas-instituciones/",y="representantes",{data:F}=T("users-enabled",()=>E(w)),{data:b}=T("companies",()=>E(v)),g=H(k=>qe(k,y,r.id)),z=($=g==null?void 0:g.data)==null?void 0:$.message;return _.exports.useEffect(()=>{z&&a(z),z==="updated"&&t.setOption("mostrar")},[z]),e(f,{children:e(we,{children:s("form",{onSubmit:x(async k=>{g.mutateAsync(k)}),children:[e(o,{p:"1em",children:s(l,{children:[e(o,{children:e("label",{htmlFor:"title",children:e("p",{className:"form-title",children:"Actualizar representante:"})})}),e(p,{children:"Nro de Carnet del representante"}),e(Q,{required:!0,info:c.ci,errors:u,register:i,defaultValue:r.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tomo del representante"}),e(N,{info:c.tome,required:!0,label:"tome",errors:u,register:i,defaultValue:r.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Folio del representante"}),e(N,{info:c.folio,required:!0,label:"folio",register:i,errors:u,defaultValue:r.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de representante"}),e(q,{info:c.name,label:"name",register:i,errors:u,required:!0,defaultValue:r.name})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tel\xE9fono del representante"}),e(P,{info:c.tel,label:"phone",register:i,errors:u,required:!0,defaultValue:r.phone})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{info:c.name,label:"namer",register:i,errors:u,required:!0,defaultValue:r.namer})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Cargo del que lo nombra"}),e(q,{info:c.occupancy,label:"namerCharge",register:i,errors:u,required:!0,defaultValue:r.namerCharger})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Adjunte el documento del nombramiento"}),e(V,{message:c.file,children:e(I,m(m({list:"representantes"},i("nominationTemplate")),W))}),u.nominationTemplate&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:b==null?void 0:b.result,label:"eiId",register:i,required:!0}),u.eiId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione usuario al que se vincula"}),e(L,{list:F==null?void 0:F.result,label:"userId",register:i,required:!0}),u.userId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),s(o,{p:"1em",children:[e(p,{children:"Deshabilitar o habilitar"}),e(le,B(m({size:"sm",colorScheme:"red"},i("enabled")),{defaultChecked:Boolean(r.enabled)}))]}),e(O,{buttonstate:g==null?void 0:g.isLoading}),d&&e(M,{message:d})]})})})}const we=j.div`
  .form-title {
    color: #009966;
    margin: 2em 0;
    font-weight: bolder;
  }
`,p=j.h4`
  color: #888888;
  font-weight: bolder;
`;function ve(){const[n,r]=_.exports.useState(""),{register:t,handleSubmit:d,formState:{errors:a}}=U(),i="/users/enabled/true",x="/empresas-instituciones/",u="/representantes",{data:w}=T("users-enabled",()=>E(i)),{data:v}=T("companies",()=>E(x)),y=H(b=>Se(u,b));return e(f,{children:s("form",{onSubmit:d(async b=>{y.mutateAsync(b)}),children:[e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nro de Carnet del representante"}),e(Q,{register:t,errors:a,required:!0,info:c.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tomo del representante"}),e(N,{label:"tome",register:t,errors:a,required:!0,info:c.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Folio del representante"}),e(N,{label:"folio",register:t,errors:a,required:!0,info:c.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de representante"}),e(V,{message:c.name,children:e(q,{label:"name",register:t,errors:a,required:!0,info:c.name})})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tel\xE9fono del representante"}),e(P,{label:"phone",register:t,errors:a,required:!0,info:c.tel})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{label:"namer",register:t,errors:a,required:!0,info:c.tutor})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Cargo del que lo nombra"}),e(q,{label:"namerCharge",register:t,errors:a,required:!0,info:c.occupancy})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Adjunte el documento del nombramiento"}),e(V,{message:c.file,children:e(I,m(m({list:"representantes"},t("nominationTemplate",{required:!0})),W))}),e(A,{label:"nominationTemplate",errors:a})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:v==null?void 0:v.result,label:"eiId",register:t,required:!0}),a.eiId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Selecciona usuario al que se vincula"}),e(L,{list:w==null?void 0:w.result,label:"userId",register:t,required:!0}),a.userId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(O,{buttonstate:y==null?void 0:y.isLoading}),n&&e(M,{message:n})]})})}const h=j.h4`
  color: #888888;
  font-weight: bolder;
`,Ce=[{option:"a\xF1adir",comp:e(ve,{})},{option:"mostrar",comp:e(de,{url:"representantes",queryKey:"agent-all"})},{option:"buscar",comp:e(ce,{url:"representantes",queryKey:"agent-id"})},{option:"habilitados",comp:e(oe,{queryKey:"agent-enabled",url:"representantes/enabled/true"})},{option:"actualizar",comp:e(xe,{})},{option:"asociado",comp:e(be,{path:"representantes/empresa-institucion",attached:"empresas-instituciones",queryKey:"func-reg"})},{option:"asociado habilitado",comp:e(re,{size:"md",children:"NO EXISTEN ASOCIACIONES !"})},{option:"por nombre",comp:e(ge,{path:"representantes/name",allnames:"representantes",queryKey:"func_by_name"})}];function Me(){const n=localStorage.getItem("jwt");return _.exports.useEffect(()=>{n&&(he.defaults.headers.common.jwt=n)},[]),e(f,{children:s(Ae,{children:[e(ne,{linear:te.green,color:"#ffffff"}),e(ae,{children:e(ie,{name:"representante",children:e(se,{form:Ce})})})]})})}const Ae=j.div`
  width: 100%;
  position: relative;
  background-color: #ffffff;
  .province {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .province__divider {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bg-grey {
    background-color: #3a3839;
  }
  .btn-backwards {
    align-self: flex-start;
    display: flex;
    text-transform: uppercase;
    font-weight: bolder;
    color: #0660b1;
    margin: 1em;
    span {
      position: relative;
      top: 0.5rem;
      left: 1rem;
      color: #009fff;
    }
  }
  .btn-backwards__text {
    font-weight: bolder;
    position: relative;
    top: 8px;
    left: 5px;
  }
`;export{Me as default};
