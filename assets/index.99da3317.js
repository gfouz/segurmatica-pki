var Q=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var K=(n,r,t)=>r in n?Q(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,m=(n,r)=>{for(var t in r||(r={}))Z.call(r,t)&&K(n,t,r[t]);if($)for(var t of $(r))ee.call(r,t)&&K(n,t,r[t]);return n},k=(n,r)=>X(n,Y(r));import{j as e,F as f,a as s,s as j,r as z,J as o,K as l,I as re}from"./index.197da568.js";import{u as R,b as te,s as ne,t as ae}from"./store.37b8cf4e.js";import{T as ie}from"./Toast.c9a8ea84.js";import{u as T,c as O,S as U,a as se,D as oe,C as le,F as de}from"./Card.94feb51f.js";import{G as ce}from"./GetEnabled.8de66928.js";import{T as A,S as ue,G as me,a as pe}from"./Getter.b8821b94.js";import{a as he,u as H,b as M}from"./index.esm.b0a48d8a.js";import{S as fe}from"./chakra-ui-select.esm.3da330ac.js";import{I as x,E}from"./ErrorWarning.68e996e2.js";import{G as be}from"./GetByParams.8849c695.js";import{G as ge}from"./GetByName.ab46f50f.js";import"./chakra-ui-button.esm.2eba4fb6.js";const ye="http://localhost:5000",D=he.create({baseURL:ye,withCredentials:!1});D.defaults.headers.common["Content-Type"]="application/json";const c={ci:"requerido 11 d\xEDgitos y ser mayor de 18 a\xF1os!",tome:"requeridos 4 d\xEDgitos para el tomo!",folio:"requeridos 4 d\xEDgitos para el folio!",name:"el nombre solo admite letras",phone:"8 d\xEDgitos requeridos para nro de tel\xE9fono",tutor:"el nombre solo admite letras.",occupancy:"este dato solo admite letras",file:"adjunte documento del nombramiento"},W={size:"sm",type:"file",variant:"flushed"};async function Se(n,r){try{const t=await D.post(n,r),{data:d}=t;return d}catch(t){return t==null?void 0:t.message}}async function qe(n,r,t){try{return(await D.put(`/${r}/${t}`,n)).data}catch(d){return d.message}}async function _(n){try{return(await D.get(n)).data}catch(r){return r.message}}function V({message:n,children:r}){return e(f,{children:e(A,{label:n,hasArrow:!0,arrowSize:15,children:r})})}function L(n){const{list:r,register:t,label:d,required:a}=n;return e(f,{children:e(fe,k(m({},t(d,{required:a})),{placeholder:"Select option",size:"xm",color:"#000000",children:r&&r.map((i,I)=>e("option",{value:i.id,children:i.email&&i.email||i.name&&i.name},I))}))})}const N=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(A,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^\d+$/,required:t,minLength:4,maxLength:4})))}),e(E,{label:n,errors:d,info:i})]}),q=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(A,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"text",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^[a-zA-Z\u00C0-\u017F\s]+$/,required:t})))}),e(E,{label:n,errors:d,info:i})]}),J=({label:n,register:r,required:t,errors:d,defaultValue:a,info:i})=>s(f,{children:[e(A,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"tel",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{required:t,pattern:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{2,6}$/im})))}),e(E,{label:n,errors:d,info:i})]});let S=new Date().getFullYear();const xe=new Date().getMonth()+1;S=parseInt(S.toString().substring(2,4));const P=({register:n,errors:r,defaultValue:t,info:d})=>s(f,{children:[e(A,{label:"campo requerido de 11 d\xEDgitos",hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:t},n("ci",{required:!0,validate:{isOlder:a=>S-parseInt(a.substring(0,2))==18&&xe>parseInt(a.substring(2,4))||S>parseInt(a.substring(0,2))&&S-parseInt(a.substring(0,2))>18||S<parseInt(a.substring(0,2))&&parseInt(a.substring(0,2))<99,min_month:a=>parseInt(a.substring(2,4))>=1,max_month:a=>parseInt(a.substring(2,4))<=12,min_day:a=>parseInt(a.substring(4,6))>=1,max_day:a=>parseInt(a.substring(4,6))<=31},minLength:11,maxLength:11})))}),e(E,{label:"ci",errors:r,info:d})]});function Ie(){var B;const n=R(te),{stack:r}=n,t=R(ne),[d,a]=z.exports.useState(""),{register:i,handleSubmit:I,formState:{errors:u}}=H(),w="/users/enabled/true",v="/empresas-instituciones/",y="representantes",{data:F}=T("users-enabled",()=>_(w)),{data:b}=T("companies",()=>_(v)),g=M(G=>qe(G,y,r.id)),C=(B=g==null?void 0:g.data)==null?void 0:B.message;return z.exports.useEffect(()=>{C&&a(C),C==="updated"&&t.setOption("mostrar")},[C]),e(f,{children:e(we,{children:s("form",{onSubmit:I(async G=>{g.mutateAsync(G)}),children:[e(o,{p:"1em",children:s(l,{children:[e(o,{children:e("label",{htmlFor:"title",children:e("p",{className:"form-title",children:"Actualizar representante:"})})}),e(p,{children:"Nro de Carnet del representante"}),e(P,{required:!0,info:c.ci,errors:u,register:i,defaultValue:r.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tomo del representante"}),e(N,{info:c.tome,required:!0,label:"tome",errors:u,register:i,defaultValue:r.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Folio del representante"}),e(N,{info:c.folio,required:!0,label:"folio",register:i,errors:u,defaultValue:r.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de representante"}),e(q,{label:"name",register:i,errors:u,required:!0,defaultValue:r.name})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tel\xE9fono del representante"}),e(J,{label:"phone",register:i,errors:u,required:!0,defaultValue:r.phone})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{label:"namer",register:i,errors:u,required:!0,defaultValue:r.namer})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Cargo del que lo nombra"}),e(q,{label:"namerCharge",register:i,errors:u,required:!0,defaultValue:r.namerCharger})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Adjunte el documento del nombramiento"}),e(V,{message:c.file,children:e(x,m(m({list:"representantes"},i("nominationTemplate")),W))}),u.nominationTemplate&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:b==null?void 0:b.result,label:"eiId",register:i,required:!0}),u.eiId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione usuario al que se vincula"}),e(L,{list:F==null?void 0:F.result,label:"userId",register:i,required:!0}),u.userId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),s(o,{p:"1em",children:[e(p,{children:"Deshabilitar o habilitar"}),e(ue,k(m({size:"sm",colorScheme:"red"},i("enabled")),{defaultChecked:Boolean(r.enabled)}))]}),e(O,{buttonstate:g==null?void 0:g.isLoading}),d&&e(U,{message:d})]})})})}const we=j.div`
  .form-title {
    color: #009966;
    margin: 2em 0;
    font-weight: bolder;
  }
`,p=j.h4`
  color: #888888;
  font-weight: bolder;
`;function ve(){const[n,r]=z.exports.useState(""),{register:t,handleSubmit:d,formState:{errors:a}}=H(),i="/users/enabled/true",I="/empresas-instituciones/",u="/representantes",{data:w}=T("users-enabled",()=>_(i)),{data:v}=T("companies",()=>_(I)),y=M(b=>Se(u,b));return e(f,{children:s("form",{onSubmit:d(async b=>{y.mutateAsync(b)}),children:[e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nro de Carnet del representante"}),e(P,{register:t,errors:a,required:!0,info:c.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tomo del representante"}),e(N,{label:"tome",register:t,errors:a,required:!0,info:c.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Folio del representante"}),e(N,{label:"folio",register:t,errors:a,required:!0,info:c.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de representante"}),e(V,{message:c.name,children:e(q,{label:"name",register:t,errors:a,required:!0,info:c.name})})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tel\xE9fono del representante"}),e(J,{label:"phone",register:t,errors:a,required:!0,info:c.phone})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{label:"namer",register:t,errors:a,required:!0,info:c.tutor})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Cargo del que lo nombra"}),e(q,{label:"namerCharge",register:t,errors:a,required:!0,info:c.occupancy})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Adjunte el documento del nombramiento"}),e(V,{message:c.file,children:e(x,m(m({list:"representantes"},t("nominationTemplate",{required:!0})),W))}),e(E,{label:"nominationTemplate",errors:a})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:v==null?void 0:v.result,label:"eiId",register:t,required:!0}),a.eiId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Selecciona usuario al que se vincula"}),e(L,{list:w==null?void 0:w.result,label:"userId",register:t,required:!0}),a.userId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(O,{buttonstate:y==null?void 0:y.isLoading}),n&&e(U,{message:n})]})})}const h=j.h4`
  color: #888888;
  font-weight: bolder;
`,Ae=[{option:"a\xF1adir",comp:e(ve,{})},{option:"mostrar",comp:e(me,{url:"representantes",queryKey:"agent-all"})},{option:"buscar",comp:e(pe,{url:"representantes",queryKey:"agent-id"})},{option:"habilitados",comp:e(ce,{queryKey:"agent-enabled",url:"representantes/enabled/true"})},{option:"actualizar",comp:e(Ie,{})},{option:"asociado",comp:e(be,{path:"representantes/empresa-institucion",attached:"empresas-instituciones",queryKey:"func-reg"})},{option:"asociado habilitado",comp:e(re,{size:"md",children:"NO EXISTEN ASOCIACIONES !"})},{option:"por nombre",comp:e(ge,{path:"representantes/name",allnames:"representantes",queryKey:"func_by_name"})}];function Ke(){const n=localStorage.getItem("jwt");return z.exports.useEffect(()=>{n&&(se.defaults.headers.common.jwt=n)},[]),e(f,{children:s(Ee,{children:[e(ie,{linear:ae.green,color:"#ffffff"}),e(oe,{children:e(le,{name:"representante",children:e(de,{form:Ae})})})]})})}const Ee=j.div`
  width: 100%;
  position: relative;
  background-color: #ffffff;
  .province {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .province__divider {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bg-grey {
    background-color: #3a3839;
  }
  .btn-backwards {
    align-self: flex-start;
    display: flex;
    text-transform: uppercase;
    font-weight: bolder;
    color: #0660b1;
    margin: 1em;
    span {
      position: relative;
      top: 0.5rem;
      left: 1rem;
      color: #009fff;
    }
  }
  .btn-backwards__text {
    font-weight: bolder;
    position: relative;
    top: 8px;
    left: 5px;
  }
`;export{Ke as default};
